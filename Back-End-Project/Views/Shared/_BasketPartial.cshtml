@model IEnumerable<BasketVM>

<div class="minicart-inner">
    <div class="offcanvas-overlay"></div>
    <div class="minicart-inner-content">
        <div class="minicart-close">
            <i class="ion-android-close"></i>
        </div>
        <div class="minicart-content-box">
            <div class="minicart-item-wrapper">
                <ul>
                    @foreach (BasketVM basketVM in Model)
                    {
                        <li class="minicart-item">
                            <div class="minicart-thumb">
                                <a href="product-details.html">
                                    <img src="~/assets/img/product/@basketVM.Image" alt="product">
                                </a>
                            </div>
                            <div class="minicart-content">
                                <h3 class="product-name">
                                    <a href="product-details.html">@basketVM.Title</a>
                                </h3>
                                <p>
                                    <span class="cart-quantity" >@basketVM.Count<strong>&times;</strong></span>
                                    <span class="cart-price">$@basketVM.Price</span>
                                </p>
                            </div>
                            <button class="minicart-remove deleteToBasket" data-id="@basketVM.Id"><i class="ion-android-close"></i></button>
                        </li>

                    }
                </ul>
            </div>

            <div class="minicart-pricing-box">
                <ul>
                    <li>
                        <span>sub-total</span>
                        <span><strong>$@Model.Sum(b => b.Price)</strong></span>
                    </li>
                    <li>
                        <span>Eco Tax </span>
                        <span><strong>$@Model.Sum(p => p.ExTax).00</strong></span>
                    </li>
                    <li class="total">
                        <span>total</span>
                        <span><strong>$@(Model.Sum(p => p.Price) - Model.Sum(p => p.ExTax)) .00</strong></span>
                    </li>
                </ul>
            </div>           
                @if (Model != null && Model.Count() > 0)
                {
                    <div class="minicart-button">
                        <a asp-action="index" asp-controller="basket"><i class="fa fa-shopping-cart"></i> view cart</a>
                    <a asp-action="checkout" asp-controller="shop"><i class="fa fa-share"></i> checkout</a>
                    </div>

                }
        </div>
    </div>
</div>